<div class="mb-3">
  <label class="form-label" [for]="inputId">{{title}}</label>
  <div class="input-group" [class.is-invalid]="error">
    <input #inputField [type]="showReveal && textVisible ? 'text' : 'password'" class="form-control"
      [class.is-invalid]="error" [id]="inputId" [(ngModel)]="value" (focus)="onFocus()" (focusout)="onFocusOut()"
      (ngModelChange)="onValueChange($event)" [disabled]="disabled" [autocomplete]="autocomplete">
    @if (showReveal) {
    <button type="button" class="btn btn-outline-secondary" (click)="toggleVisibility()" i18n-title
      title="Show password" [disabled]="disabled || disableRevealToggle">
      <i-bs name="eye"></i-bs>
    </button>
    }
  </div>
  <div class="invalid-feedback">
    {{error}}
  </div>
  @if (hint) {
  <small class="form-text text-muted" [innerHTML]="hint | safeHtml"></small>
  }

  <!-- Password strength meter -->
  @if (value && value.length > 0) {
  <div class="password-strength-meter mt-2">
    <div class="progress" style="height: 5px;">
      <div class="progress-bar" [style.width.%]="(passwordStrength + 1) * 20" [ngClass]="{
                 'bg-danger': passwordStrength <= 1,
                 'bg-warning': passwordStrength === 2,
                 'bg-info': passwordStrength === 3,
                 'bg-success': passwordStrength === 4
               }">
      </div>
    </div>
    <small class="form-text" [ngClass]="{
          'text-danger': passwordStrength <= 1,
          'text-warning': passwordStrength === 2,
          'text-info': passwordStrength === 3,
          'text-success': passwordStrength === 4
        }">
      {{['Very Weak', 'Weak', 'Fair', 'Strong', 'Very Strong'][passwordStrength]}}
    </small>
    @if (passwordFeedback) {
    <small class="form-text d-block">{{passwordFeedback}}</small>
    }
  </div>
  }
</div>